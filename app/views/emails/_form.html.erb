
<%= 
input_form(path) do |f|
  f << error_messages_for(:email)
  f << input_table_form do |s|
    s << input_table_row('Label', required_text_field(:email, :label))
    s << input_table_row('Email Address', required_text_field(:email, :address))
    s << input_table_row('End Date', std_text_field(:email, :end_date, readonly: true)) if email.end_date.present?
    s << input_table_row('', submit_and_cancel_buttons('Save', 'Cancel', membership_path(email.person.membership)))
    s << input_table_row('', loading_spinner)
  end
end
%>

<%=
  if !email.new_record?
    if email.end_date.present?
      safe_join([
        button_to('Reactivate', email, {class: 'btn py-0 btn-outline-success mx-1', method: :delete, params: {operation: :reactivate}}),
        delete_button('Delete', email, "this email address permanently", params: {operation: :destroy}), 
      ], ' '.to_nb)
    else
      delete_button('Deactivate', email, false, params: {operation: :deactivate})
    end
  end
%>
